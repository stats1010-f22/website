{
  "hash": "fb80dc455a7a4f32c43c2f9d3792f5a9",
  "result": {
    "markdown": "---\ntitle: \"Chapter 15: Confidence intervals\"\nsubtitle: \"STAT 1010 - Fall 2022\"\nfooter:  \"[stat1010-f22.github.io/website](https://stats1010-f22.github.io/website/)\"\nformat: \n  revealjs: \n    theme: slides.scss\n    transition: fade\n    slide-number: true\neditor: visual\nexecute:\n  freeze: auto\n---\n\n\n\n\n# Learning outcomes\n\n::: incremental\n-   Building confidence intervals for the population proportion\n-   Building confidence intervals for the population mean\n-   Understanding the $t$ distributions\n-   Interpreting confidence intervals\n-   Understand the margin of error and how to use it to compute sample sizes\n:::\n\n## Revision\n\n![](lect_07-images/parameter_estimate.png)\n\n# Confidence interval for proportion\n\n::: incremental\n-   What percent of customers are pleased with your service?\n-   What percent of customers will refinance their loans?\n-   What percentage of employees are in favor of a uniform change?\n-   What percentage of voters will vote for Fetterman?\n:::\n\n#  {background-iframe=\"https://nzgwynn.shinyapps.io/CI_prop/\"}\n\n::: notes\n-   size of sample decreases variability\n-   fatter in middle, skinnier near 0 and 1\n:::\n\n## Variability\n\n::: notes\nask them what they population mean should be\n\nwe also need to think about the variability\n:::\n\n::: incremental\n-   dependent on $p$ - fatter in middle, skinnier near 0 and 1\n-   dependent on $n$, number of samples, bigger sample, less variability\n:::\n\n## Variability - math\n\n$$ \\hat{p} \\sim N(\\mu = p, \\sigma^2 = \\frac{p(1-p)}{n}) $$\n\n::: incremental\n-   numerator of the variance is similar to that of a Binomial distribution\n-   as sample size increases, variance decreases\n:::\n\n#  {background-iframe=\"https://nzgwynn.shinyapps.io/Ci_prop_with_alpha/\"}\n\n## CI - math\n\n$$\\hat{p} \\pm z_{\\alpha/2} \\cdot \\sqrt{\\hat{p}(1-\\hat{p})/n} $$ For $95\\%$ CI, $z_{\\alpha/2} = 1.96$\n\nAs confidence level increases, interval widens\n\nIn `R`: `qnorm(0.025)`\n\n## Assumptions\n\n::: incremental\n-   *SRS condition* The observed sample is SRS from the appropriate population. If population is finite, less than 10% of total population\n-   *Sample size condition (for proportion)* *both* $n\\hat{p}$ and $n(1-\\hat{p})$ are larger than 10.\n:::\n\n## Example 1\n\n::: incremental\n-   Let $\\hat{p}= 0.14$ and $n = 350$, find a $95\\%$ CI for the proportion\n\n-   $\\begin{aligned} se(\\hat{p}) &= \\sqrt{\\frac{\\hat{p}(1-\\hat{p})}{n}} &= \\sqrt{\\frac{0.14(1-0.14)}{350}}\\end{aligned} \\approx 0.0185$\n\n-   lower value: $\\hat{p} - 1.96 \\cdot 0.0185 \\approx 0.10374$\n\n-   upper value: $\\hat{p} + 1.96 \\cdot 0.0185 \\approx 0.17626$\n:::\n\n## Example 2\n\nAn auditor checks a sample of 225 randomly chosen transactions from among the thousands processed in an office. Thirty-five contains errors in crediting or debiting the appropriate account\n\na\\. Does this situation meet the conditions required for a $z$-interval for the proportion?\n\nb\\. Find the $95\\%$ confidence interval for $p$, the proportion of all transactions processed in the this office that have these errors.\n\nc\\. Managers claim that the proportion of errors is about $10\\%$. Does that seem reasonable?\n\n## Example 2 - solns\n\n::: incremental\na.  yes, $\\hat{p} = 35/225 \\approx 0.156$ so $n\\hat{p}, n(1-\\hat{p})> 10$ and we assume sampled $<10\\%$\n\nb.  $\\begin{aligned} \\hat{p} \\pm z_{\\alpha/2} \\cdot \\sqrt{\\hat{p}(1-\\hat{p})/n} &= 0.156 \\pm 1.96 \\sqrt{0.156(1-0.156)/225}\\\\ &= 0.156 \\pm 1.96 \\cdot 0.0242 \\\\ &= 0.156 \\pm 0.047\\\\ & [0.109, 0.203]\\end{aligned}$\n\nc.  No $10\\%$ is too low, with $95\\%$ confidence it is higher\n:::\n\n# Confidence interval for mean\n\n::: incremental\n-   Average weight for filled ice cream containers\n-   Average purchases from a website in US\\$\n:::\n\n#  {background-iframe=\"https://nzgwynn.shinyapps.io/CI_mean_std_error/\"}\n\n## Variability\n\n::: notes\n-   to account for smaller sample size we use a different distribution\n:::\n\n::: incremental\n-   standard deviation of distribution\n    -   higher sd -\\> wider CI\n-   sample size\n    -   smaller sample size -\\> wider CI\n:::\n\n##  {background-iframe=\"https://nzgwynn.shinyapps.io/t-distribution/\"}\n\n::: notes\n-   t distribution more density in tails\n:::\n\n## CI - mean\n\n$$\\bar{x} \\pm t_{\\alpha/2, n-1} \\cdot \\frac{s}{\\sqrt{n}} $$\n\n## T - distribution\n\n::: notes\n-   don't know sigma so use s in it's place\n-   as df get bigger (a proxy for n) S approaches sigma\n:::\n\n::: incremental\n-   $Z = \\frac{X-\\mu_X}{\\sigma_X}$\n-   $\\bar{X} \\sim N(\\mu = \\mu\\_X, \\sigma^2 = \\frac{\\sigma_X^2}{n})$\n-   $T_{n-1} = \\frac{\\bar{X}-\\mu_X}{S/\\sqrt{n}}$\n-   $t$ distribution has more density in the tails to account for smaller sample sizes\n:::\n\n#  {background-iframe=\"https://nzgwynn.shinyapps.io/CI_mean_with_alpha/\"}\n\n## Variability\n\n::: incremental\n-   dependent on $confidence \\text{ }level$ - as confidence level increases so does the width of the interval\n-   dependent on $n$, number of samples, bigger sample, less variability\n:::\n\n## Assumptions\n\n::: incremental\n-   *SRS condition* The observed sample is SRS from the appropriate population. If population is finite, less than 10% of total population\n-   *Sample size condition* the sample size is larger than 10 times the absolute value of the [kurtosis](https://stats1010-f22.github.io/website/slides/lect_11.html#/kurtosis), $n>10|K_4|$.\n:::\n\n## Example 1\n\n::: incremental\n-   Let $\\bar{x}= \\$3285$, $n = 150$, and $s = \\$238$ find a $95\\%$ CI for the mean\n\n-   $\\begin{aligned} se(\\bar{x}) &= s/\\sqrt{n} &= 238/\\sqrt{150}\\end{aligned} \\approx 19.43262$\n\n-   `qt(.025, df = 149)` $\\approx -1.976$\n\n-   lower value: $3285 - 1.976 \\cdot 19.43262 \\approx \\$3,320$\n\n-   upper value: $3285 + 1.976 \\cdot 19.43262 \\approx \\$3,247$\n\n-   `3285 + qt(.025, df = 149)* 238/sqrt(150)`\n:::\n\n## Example 2\n\nOffice administrators claim that the average amount on a purchase order is \\$6,000. A SRS of 49 purchase orders averages $\\bar{x} = \\$4,200$ with $s = \\$3,500$.\n\na.  What is the relevant sampling distribution?\nb.  Find the 95% confidence interval for $\\mu$, the mean of purchase orders handled by this office during the sampling period.\nc.  Do you think the administrators claim is reasonable?\n\n## Example 2 - solns\n\n::: incremental\na.  $N(\\mu, \\sigma^2/49)$\n\nb.  $$\\begin{aligned} 4200 \\pm 2.01 \\cdot 3500/\\sqrt{49} &= 4200 \\pm 2.01 \\cdot 500 \\\\ &= 4200 \\pm -1005.317 \\\\ &\\approx [3195, 5205]\\end{aligned}$$\n\nc.  No $\\$6,00$ is way above the $95\\%$ confidence interval\n:::\n\n# Interpreting CI\n\n\"We can be *95% confident* that the *average purchase order* handled by *this office* lies between \\$3195 and \\$5205.\"\n\n# Manipulating CI\n\nIn example from means. How could we update the CI if we know we had 10 offices with similar purchase patterns.\n\n::: incremental\n-   If $[L \\text{ to } U]$ is a $100(1 – \\alpha)%$ confidence interval for $\\mu$\n\n-   then $[c \\cdot L \\text{ to } c \\cdot U]$ is a $100 (1 – \\alpha)%$ confidence interval for $c \\cdot \\mu$\n\n-   and $[c + L \\text{ to } c + U]$ is a $100(1 – \\alpha)%$ confidence interval for $c + \\mu$.\n:::\n\n## Example 2 - solns\n\n$10 \\cdot [3195, 5205] = [31950, 52050]$\n\n# Margin of error\n\n$$\\bar{x} \\pm \\frac{2s}{\\sqrt{n}} $$\n\n::: incremental\n-   Margin of error = $\\frac{2s}{\\sqrt{n}}$\n:::\n\n## Sample size - mean\n\n$$n = \\frac{4s^2}{\\text{(Margin of error)}^2} $$\n\n::: incremental\n-   For $p$ use $p = 0.5$ for biggest variance\n:::\n\n# Your turn\n\n[Click here](https://stats1010-f22.github.io/website/ae/ae-11.html) or the qr code below\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](lect_14_files/figure-revealjs/unnamed-chunk-2-1.png){width=960}\n:::\n:::\n",
    "supporting": [
      "lect_14_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    function fireSlideChanged(previousSlide, currentSlide) {\n\n      // dispatch for htmlwidgets\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for reveal\n    if (window.Reveal) {\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\n        fireSlideChanged(event.previousSlide, event.currentSlide);\n      });\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}