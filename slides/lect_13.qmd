---
title: "Chapter 14: Sampling variation and quality"
subtitle: "STAT 1010 - Fall 2022"
footer:  "[stat1010-f22.github.io/website](https://stats1010-f22.github.io/website/)"
format: 
  revealjs: 
    theme: slides.scss
    transition: fade
    slide-number: true
editor: visual
execute:
  freeze: auto
---

```{r include = FALSE}
library(countdown)
library(pdftools)
library(tidyverse)
```

# Learning outcomes

::: incremental
-   The shape of the distribution of the sample mean and why it is important
-   When we can assume a normal distribution for the sample mean
-   
-   
:::

## Sampling

::: incremental
- SRS
- Stratified sampling
- Cluster sampling
- it would be nice to sample repeatedly to see how the mean values compare
:::

#  {background-iframe="https://nzgwynn.shinyapps.io/sample_from_uniform/"}


## Benefits of averaging

::: incremental
- reduces variation
- more normal than the original distribution
:::

## Normal model

::: incremental
- Find [kurtosis](https://stats1010-f22.github.io/website/slides/lect_11.html#/kurtosis)($K_4$)
- If $n > 10 |K_4|$, where $n$ is the sample size, then a normal model adequately approximates the distribution of the sample mean $\bar{X}$.
- If we know the data come from a normal distribution this is also true.
:::

#  {background-iframe="https://nzgwynn.shinyapps.io/standard_error/"}

##  {background-image="lect-13_things/std_error.png" background-size="contain"}

## Standard error

$$ SD(\bar{X}) = SE(\bar{X}) = 
\frac{\sigma}{\sqrt{n}}) $$ 

## Sampling distribution

If $X \sim N(\mu_X, \sigma_X^2)$

$$ \bar{X} \sim N(\mu = \mu_X, \sigma^2 = \frac{\sigma_X^2}{n}) $$ 
## Example 

:::
1. Let $Y \sim N(\mu = 5, \sigma^2 = 16)$, find the distribution of the mean of repeated samples of size 4. 
    - $\bar{Y} \sim N(\mu = 5, \sigma^2 = 4)$
:::

##  {background-image="lect-13_things/EM_tweet.png" background-size="contain"}

# Production line {background-image="lect-13_things/manufacturing_plant.png" background-size="contain"}

## {background-image="lect-13_things/error_classifications.png" background-size="contain"}

## Control limits

::: incremental
- if mean production is outside certain values, we may need to stop and recallibrate machinery
- these values are called *control limits*
- $\mu - L \leq \bar{X} \leq \mu + L$
- $\mu - L$ and $\mu + L$ are *control limits*
:::

## Types of errors
::: incremental
- False positives - type 1 error
    - act when you should not
    - probabiliy of occurence denoted $\alpha$
- False negatives - type 2 error
   - don't act when you should
   - probabiliy of occurence denoted $\beta$
:::

## Setting control limits {.smaller}


If $\bar{X} \sim N(\mu = 12, \sigma^2 = 2.3)$ how can we find the control limits? 
::: incremental
1. Set the control limits and find the $\alpha$ value
    - We want the control limits to be between 10 and 14
    - $Pr(\bar{X} < 10 \textrm{ or } \bar{X} > 14)$
    - $\begin{aligned}P(\bar{X} < 10) &= P(\frac{\bar{X} - \mu_\bar{X}}{\sigma_\bar{X}} < \frac{10-\mu_\bar{X}}{\sigma_\bar{X}}) \\ & = P(Z < \frac{10-12}{\sqrt{2.3}} = -1.318761)\end{aligned}$
    - `pnorm(-1.318761)` $\approx 0.09362451$
    - `pnorm(-1.318761, mean = 12, sd = sqrt(2.3))`
    - $\begin{aligned}P(\bar{X} > 14) &= P(\frac{\bar{X} - \mu_\bar{X}}{\sigma_\bar{X}} > \frac{14-\mu_\bar{X}}{\sigma_\bar{X}}) \\ & = P(Z > \frac{14-12}{\sqrt{2.3}} = 1.318761)\end{aligned}$
    - `1 - pnorm(1.318761)` $\approx 0.09362451$
    - `pnorm(1.318761, mean = 12, sd = sqrt(2.3))`
:::

## Setting control limits 

::: incremental
2. Set the $\alpha$ value and find the control limits

:::


